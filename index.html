<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Picao AI: Founder Simulator v3.0</title>
    <style>
        /* --- THEME VARIABLES --- */
        :root {
            /* DARK MODE (DEFAULT) */
            --bg-color: #050505;
            --card-bg: rgba(24, 24, 27, 0.65);
            --text-main: #fafafa;
            --text-muted: #a1a1aa;
            --border: rgba(255, 255, 255, 0.08);
            --accent: #a855f7;
            --accent-glow: rgba(168, 85, 247, 0.4);
            --btn-bg: rgba(255, 255, 255, 0.03);
            --btn-hover: rgba(168, 85, 247, 0.1);
            --scanline: rgba(0, 0, 0, 0.5);
            --grid: rgba(255, 255, 255, 0.03);
        }

        /* LIGHT MODE OVERRIDES */
        [data-theme="light"] {
            --bg-color: #f8fafc;
            --card-bg: rgba(255, 255, 255, 0.85);
            --text-main: #0f172a;
            --text-muted: #64748b;
            --border: rgba(0, 0, 0, 0.08);
            --accent: #9333ea; /* Slightly darker purple for contrast */
            --accent-glow: rgba(147, 51, 234, 0.25);
            --btn-bg: #ffffff;
            --btn-hover: #f3e8ff;
            --scanline: rgba(255, 255, 255, 0); /* No scanlines in light mode */
            --grid: rgba(0, 0, 0, 0.03);
        }

        body {
            background-color: var(--bg-color);
            background-image: 
                linear-gradient(var(--grid) 1px, transparent 1px),
                linear-gradient(90deg, var(--grid) 1px, transparent 1px);
            background-size: 40px 40px;
            color: var(--text-main);
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            overflow: hidden;
            transition: background-color 0.5s ease;
        }

        /* --- VISUAL EFFECTS --- */
        /* CRT Scanline Overlay */
        .scanlines {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(to bottom, var(--scanline) 50%, transparent 50%);
            background-size: 100% 4px;
            pointer-events: none;
            z-index: 99;
            opacity: 0.15;
        }

        /* Floating Particles */
        .particles {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: -1;
            overflow: hidden;
        }
        .particle {
            position: absolute;
            width: 4px; height: 4px;
            background: var(--accent);
            border-radius: 50%;
            opacity: 0.3;
            animation: float 20s infinite linear;
        }
        @keyframes float {
            0% { transform: translateY(100vh) scale(0); opacity: 0; }
            50% { opacity: 0.5; }
            100% { transform: translateY(-100px) scale(1); opacity: 0; }
        }

        /* --- UI COMPONENTS --- */
        #game-container {
            width: 100%; max-width: 950px;
            padding: 50px;
            background: var(--card-bg);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border: 1px solid var(--border);
            border-radius: 24px;
            box-shadow: 0 0 80px -20px var(--accent-glow), 
                        inset 0 0 0 1px rgba(255,255,255,0.05);
            position: relative;
            z-index: 10;
            transition: all 0.5s ease;
        }

        /* Theme Toggle */
        .theme-switch {
            position: absolute; top: 25px; right: 25px;
            background: var(--btn-bg);
            border: 1px solid var(--border);
            color: var(--text-muted);
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.8rem;
            display: flex; align-items: center; gap: 8px;
            transition: all 0.2s ease;
        }
        .theme-switch:hover { color: var(--accent); border-color: var(--accent); }

        /* HUD */
        .hud {
            display: grid; grid-template-columns: repeat(4, 1fr);
            gap: 20px; margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border);
        }
        .hud-item { display: flex; flex-direction: column; }
        .hud-label { 
            font-size: 0.7rem; color: var(--text-muted); 
            text-transform: uppercase; letter-spacing: 1.5px; margin-bottom: 6px;
            font-weight: 600;
        }
        .hud-value { 
            font-family: 'Courier New', monospace; font-weight: 700; 
            font-size: 1.4rem; color: var(--text-main); 
        }
        .hud-value.highlight { color: var(--accent); text-shadow: 0 0 15px var(--accent-glow); }

        /* Progress Bars */
        .bar-container {
            height: 6px; background: rgba(128,128,128,0.1);
            border-radius: 3px; overflow: hidden; margin-bottom: 8px;
        }
        .bar-fill { height: 100%; transition: width 0.5s ease; }
        #stress-fill { background: #ef4444; }
        #equity-fill { background: var(--accent); }

        /* Inventory */
        #traits-box {
            display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 40px;
            padding: 15px; background: rgba(128,128,128,0.05); border-radius: 12px;
        }
        .trait {
            font-size: 0.75rem; padding: 4px 10px; border-radius: 6px;
            border: 1px solid var(--border);
            font-family: monospace; letter-spacing: 0.5px;
            animation: popIn 0.3s ease;
        }
        @keyframes popIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        .trait.good { color: #10b981; border-color: rgba(16,185,129,0.3); background: rgba(16,185,129,0.05); }
        .trait.bad { color: #ef4444; border-color: rgba(239,68,68,0.3); background: rgba(239,68,68,0.05); }

        /* Story Text */
        #story-text {
            font-size: 1.25rem; line-height: 1.7; color: var(--text-muted);
            margin-bottom: 40px; min-height: 100px; font-weight: 300;
        }
        .cursor { display: inline-block; width: 2px; height: 1.2em; background: var(--accent); animation: blink 1s infinite; vertical-align: text-bottom; margin-left: 2px; }
        @keyframes blink { 50% { opacity: 0; } }

        /* Choices */
        .choices-grid { display: grid; gap: 15px; }
        .choice-btn {
            background: var(--btn-bg);
            border: 1px solid var(--border);
            color: var(--text-main);
            padding: 24px; border-radius: 12px;
            cursor: pointer; text-align: left;
            transition: all 0.2s ease;
            display: flex; justify-content: space-between; align-items: center;
            position: relative; overflow: hidden;
        }
        .choice-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            background: var(--btn-hover);
            border-color: var(--accent);
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        .choice-btn::before {
            content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 4px;
            background: var(--accent); opacity: 0; transition: opacity 0.2s;
        }
        .choice-btn:hover::before { opacity: 1; }
        
        .choice-meta { text-align: right; font-size: 0.8rem; color: var(--text-muted); font-family: monospace; }
        .choice-main { font-weight: 500; font-size: 1.05rem; }

        /* Start Screen */
        #start-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg-color); z-index: 20;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            text-align: center; transition: opacity 0.8s ease;
        }
        h1 { 
            font-size: 3.5rem; margin: 0 0 20px 0; letter-spacing: -2px;
            background: linear-gradient(135deg, var(--text-main), var(--text-muted));
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        .start-btn {
            background: var(--accent); color: white; border: none;
            padding: 18px 50px; font-size: 1.2rem; border-radius: 50px;
            cursor: pointer; font-weight: 600; letter-spacing: 1px;
            box-shadow: 0 0 30px var(--accent-glow);
            transition: all 0.3s ease;
        }
        .start-btn:hover { transform: scale(1.05); box-shadow: 0 0 50px var(--accent-glow); }

    </style>
</head>
<body>

    <div class="scanlines"></div>
    <div class="particles" id="particles"></div>

    <div id="start-overlay">
        <div style="margin-bottom: 20px; font-family: monospace; color: var(--accent); border: 1px solid var(--accent); padding: 5px 12px; border-radius: 20px;">NYC_ALPHA_v3.2</div>
        <h1>Picao AI</h1>
        <p style="color: var(--text-muted); font-size: 1.2rem; max-width: 500px; margin-bottom: 40px; line-height: 1.6;">
            Build the unified workspace. Defeat the "Context Tax".<br>
            Manage your equity, sanity, and net worth.
        </p>
        <button class="start-btn" onclick="initGame()">INITIALIZE WORKSPACE</button>
    </div>

    <div id="game-container" style="display:none; opacity:0;">
        <button class="theme-switch" onclick="toggleTheme()">
            <span id="theme-icon">☀</span> Theme
        </button>

        <div class="hud">
            <div class="hud-item">
                <span class="hud-label">Cash Runway</span>
                <span class="hud-value" id="cash">$0</span>
            </div>
            <div class="hud-item">
                <span class="hud-label">Valuation</span>
                <span class="hud-value highlight" id="valuation">$0</span>
            </div>
            <div class="hud-item">
                <span class="hud-label">Your Equity</span>
                <span class="hud-value" id="equity">100%</span>
                <div class="bar-container"><div class="bar-fill" id="equity-fill" style="width: 100%"></div></div>
            </div>
            <div class="hud-item">
                <span class="hud-label">Founder Stress</span>
                <span class="hud-value" id="stress">0%</span>
                <div class="bar-container"><div class="bar-fill" id="stress-fill" style="width: 0%"></div></div>
            </div>
        </div>

        <div id="traits-box"></div>

        <div id="story-area">
            <h2 id="node-title" style="margin: 0 0 15px 0; color: var(--text-main);">Init...</h2>
            <div id="story-text"></div>
            <div class="choices-grid" id="choices"></div>
        </div>
    </div>

    <script>
        // --- GAME STATE ---
        let state = {
            cash: 0,
            valuation: 0,
            equity: 100, // Percentage
            stress: 0,
            users: 0,
            traits: [],
            history: []
        };

        // --- PARTICLE GENERATOR ---
        function createParticles() {
            const container = document.getElementById('particles');
            for(let i=0; i<30; i++) {
                let p = document.createElement('div');
                p.className = 'particle';
                p.style.left = Math.random() * 100 + 'vw';
                p.style.animationDuration = (Math.random() * 10 + 10) + 's';
                p.style.animationDelay = Math.random() * 5 + 's';
                container.appendChild(p);
            }
        }
        createParticles();

        // --- THEME TOGGLE ---
        function toggleTheme() {
            const body = document.body;
            const current = body.getAttribute('data-theme');
            const icon = document.getElementById('theme-icon');
            if (current === 'light') {
                body.setAttribute('data-theme', 'dark');
                icon.innerText = '☀';
            } else {
                body.setAttribute('data-theme', 'light');
                icon.innerText = '☾';
            }
        }

        // --- TYPEWRITER EFFECT ---
        let typeInterval;
        function typeText(text, callback) {
            const el = document.getElementById('story-text');
            el.innerHTML = '';
            let i = 0;
            clearInterval(typeInterval);
            
            // Add cursor
            const cursor = document.createElement('span');
            cursor.className = 'cursor';
            el.appendChild(cursor);

            typeInterval = setInterval(() => {
                if (i < text.length) {
                    cursor.before(text.charAt(i));
                    i++;
                } else {
                    clearInterval(typeInterval);
                    if(callback) callback();
                }
            }, 10); // Typing speed
        }

        // --- STORY DATA ---
        const nodes = {
            start: {
                title: "Day 0: The Context Tax",
                text: "You are a creator. You spend 4 hours a day switching between Notion, Canva, and ChatGPT. It's destroying your flow. You have an idea for Picao AI: A unified workspace where 'One Thought = Infinite Reach.' You have $5k in savings.",
                options: [
                    { text: "Code it yourself in the basement", next: "mvp_build", equity: 0, cash: 5000, val: 1000000, stress: 20, trait: "Solo Dev" },
                    { text: "Apply to Y Combinator immediately", next: "yc_interview", stress: 10, val: 2000000 },
                    { text: "Tweet the idea to see if it goes viral", next: "viral_test", stress: 5, val: 1000000 }
                ]
            },
            viral_test: {
                title: "Validation",
                text: "Your thread 'The Context Tax is Killing Us' goes viral. 5,000 signups overnight. Investors are sliding into your DMs.",
                options: [
                    { text: "Raise a Pre-Seed Round ($500k)", next: "seed_round", cash: 500000, equity: -10, val: 5000000, trait: "Hype Beast" },
                    { text: "Bootstrap with Pre-Sales", next: "mvp_build", cash: 20000, stress: 30, trait: "Indie Hacker" }
                ]
            },
            mvp_build: {
                title: "The MVP Grind",
                text: "You're coding 16 hours a day. The 'Refraction Engine' works, but the UI is ugly. Users love the logic but hate the design.",
                options: [
                    { text: "Hire a premium Designer", next: "design_polish", cash: -10000, stress: -5, val: 2000000 },
                    { text: "Keep shipping features (Ugly but functional)", next: "tech_debt_city", stress: 20, trait: "Function Over Form" }
                ]
            },
            yc_interview: {
                title: "The Interview",
                text: "Sam Altman asks: 'Why can't Google just build this?' You freeze for a second.",
                options: [
                    { text: "Say: 'They are too slow. We are native.'", next: "yc_accepted", cash: 125000, equity: -7, val: 3000000, trait: "YC Alumni" },
                    { text: "Say: 'Because our AI is model-agnostic.'", next: "yc_rejected", stress: 15 }
                ]
            },
            yc_rejected: {
                title: "Rejection",
                text: "They passed. 'Too niche,' they said. Fuel for the fire.",
                options: [
                    { text: "Prove them wrong. Build faster.", next: "mvp_build", stress: 25, trait: "Chip on Shoulder" }
                ]
            },
            yc_accepted: {
                title: "Batch W26",
                text: "You're in. The network is powerful. You launch on Demo Day.",
                options: [
                    { text: "Raise a massive Seed Round ($3M)", next: "series_a_grind", cash: 3000000, equity: -20, val: 15000000 },
                    { text: "Stay lean. Raise just enough ($500k)", next: "slow_growth", cash: 500000, equity: -10, val: 8000000 }
                ]
            },
            seed_round: {
                title: "Seed Funded",
                text: "Money in the bank. Now the clock is ticking. You need 10k DAU (Daily Active Users) in 6 months.",
                options: [
                    { text: "Spend it on Ads", next: "marketing_burn", cash: -200000, stress: 10 },
                    { text: "Hire a Rockstar Engineer", next: "product_market_fit", cash: -100000, stress: -10, trait: "10x Team" }
                ]
            },
            product_market_fit: {
                title: "Product Market Fit",
                text: "It's clicking. Creators are using Picao for 6 hours a day. Retention is 80%. Series A investors are knocking.",
                options: [
                    { text: "Raise Series A ($15M)", next: "series_a_grind", cash: 15000000, equity: -15, val: 60000000 },
                    { text: "Reject them. We are profitable.", next: "indie_paradise", trait: "Profit First" }
                ]
            },
            series_a_grind: {
                title: "Scaling Pains",
                text: "You have 50 employees. Half of them don't know your name. The culture is diluting. A competitor launches a clone.",
                options: [
                    { text: "Acquire the competitor", next: "monopoly", cash: -5000000, val: 80000000, stress: 20 },
                    { text: "Focus on Enterprise Sales", next: "b2b_pivot", stress: 30, trait: "Corporate suit" }
                ]
            },
            monopoly: {
                title: "The Unicorn Run",
                text: "You crushed the competition. Picao is the standard. You are valued at $1 Billion.",
                options: [
                    { text: "IPO (Go Public)", next: "win_ipo", equity: -5, val: 1200000000 },
                    { text: "Sell to Microsoft", next: "win_acquisition", val: 800000000 }
                ]
            },
            
            // --- ENDINGS ---
            win_ipo: {
                title: "NASDAQ: PICO",
                text: "You rang the bell. Confetti everywhere. You are the CEO of a public company. The Context Tax is dead.",
                end: true
            },
            win_acquisition: {
                title: "The Exit",
                text: "You sold. The wire transfer hit your account. You bought an island. Was it worth it?",
                end: true
            },
            indie_paradise: {
                title: "Indie King",
                text: "You own 80% of a company making $10M profit a year. You work 20 hours a week. Pure freedom.",
                end: true, val: 50000000
            },
            game_over_stress: {
                title: "Burnout Collapse",
                text: "You pushed too hard. Hospitalized for exhaustion. The board replaced you while you recovered.",
                end: true, val: 0
            },
            game_over_cash: {
                title: "Bankrupt",
                text: "Runway hits zero. Servers shut down. It was a good dream.",
                end: true, val: 0
            }
        };

        // --- RANDOM EVENTS ---
        const randomEvents = [
            { text: "EVENT: Viral Tweet! +10k Users", cash: 0, val: 500000, stress: -5 },
            { text: "EVENT: AWS Bill Spike! -$20k", cash: -20000, val: 0, stress: 10 },
            { text: "EVENT: Co-Founder Drama. Stress Up.", cash: 0, val: 0, stress: 20 },
            { text: "EVENT: Featured on TechCrunch.", cash: 0, val: 1000000, stress: 0 }
        ];

        // --- GAME LOGIC ---
        function initGame() {
            document.getElementById('start-overlay').style.opacity = 0;
            setTimeout(() => {
                document.getElementById('start-overlay').style.display = 'none';
                const container = document.getElementById('game-container');
                container.style.display = 'block';
                // Trigger reflow
                void container.offsetWidth;
                container.style.opacity = 1;
                loadNode('start');
            }, 800);
        }

        function loadNode(nodeKey) {
            const node = nodes[nodeKey];
            
            // Random Event Trigger (20% chance if not start/end)
            if (nodeKey !== 'start' && !node.end && Math.random() < 0.25) {
                const event = randomEvents[Math.floor(Math.random() * randomEvents.length)];
                state.cash += event.cash;
                state.valuation += event.val;
                state.stress += event.stress;
                updateHUD();
                // We show the event as a toast or append to text, here we just append logic
                // For simplicity in this structure, we'll flash it in the next text render
                node.text = `[${event.text}]<br><br>` + node.text;
            }

            document.getElementById('node-title').innerText = node.title;
            
            // Clear choices
            const choicesBox = document.getElementById('choices');
            choicesBox.innerHTML = '';
            choicesBox.style.opacity = 0;

            // Type text
            typeText(node.text, () => {
                // Render choices after typing
                choicesBox.style.opacity = 1;
                
                if (node.end) {
                    renderEndScreen(node);
                    return;
                }

                node.options.forEach(opt => {
                    const btn = document.createElement('button');
                    btn.className = 'choice-btn';
                    
                    let meta = [];
                    if(opt.cash) meta.push((opt.cash > 0 ? '+' : '') + formatMoney(opt.cash));
                    if(opt.equity) meta.push(opt.equity + '% Equity');
                    if(opt.stress) meta.push(opt.stress + '% Stress');
                    
                    btn.innerHTML = `
                        <span class="choice-main">${opt.text}</span>
                        <span class="choice-meta">${meta.join(' | ')}</span>
                    `;
                    
                    btn.onclick = () => makeChoice(opt);
                    choicesBox.appendChild(btn);
                });
            });
        }

        function makeChoice(opt) {
            // Apply effects
            if(opt.cash) state.cash += opt.cash;
            if(opt.valuation) state.valuation = opt.val || (state.valuation + (opt.val || 0)); // simple logic
            if(opt.val && !opt.valuation) state.valuation = opt.val; // Hard set if provided
            if(opt.equity) state.equity += opt.equity;
            if(opt.stress) state.stress += opt.stress;
            if(opt.trait) addTrait(opt.trait);

            // Clamp values
            if(state.stress < 0) state.stress = 0;
            if(state.equity < 0) state.equity = 0;

            updateHUD();

            // Check Fail States
            if (state.stress >= 100) {
                loadNode('game_over_stress');
            } else if (state.cash < 0 && state.valuation > 0) { // Allow debt if valuation is 0 (start)
                loadNode('game_over_cash');
            } else {
                loadNode(opt.next);
            }
        }

        function addTrait(trait) {
            if(!state.traits.includes(trait)) {
                state.traits.push(trait);
                const badge = document.createElement('span');
                badge.className = 'trait ' + (['10x Team', 'Profit First', 'YC Alumni'].includes(trait) ? 'good' : 'neutral');
                badge.innerText = trait;
                document.getElementById('traits-box').appendChild(badge);
            }
        }

        function renderEndScreen(node) {
            // Calculate Net Worth
            // Formula: (Valuation * (Equity/100)) + Cash
            const netWorth = (state.valuation * (state.equity / 100)) + state.cash;
            
            const choicesBox = document.getElementById('choices');
            choicesBox.innerHTML = `
                <div style="background: rgba(168, 85, 247, 0.1); border: 1px solid var(--accent); padding: 30px; border-radius: 12px; text-align: center;">
                    <h3 style="margin-top:0; color: var(--accent);">CAREER SUMMARY</h3>
                    <p style="font-size: 1.5rem; margin: 10px 0;">Final Net Worth: <strong style="color: var(--text-main);">${formatMoney(netWorth)}</strong></p>
                    <p>Equity Retained: ${state.equity}%</p>
                    <p>Company Valuation: ${formatMoney(state.valuation)}</p>
                    <button class="choice-btn" style="justify-content: center; margin-top: 20px;" onclick="location.reload()">START NEW COMPANY</button>
                </div>
            `;
        }

        function updateHUD() {
            document.getElementById('cash').innerText = formatMoney(state.cash);
            document.getElementById('valuation').innerText = formatMoney(state.valuation);
            document.getElementById('equity').innerText = state.equity + '%';
            document.getElementById('stress').innerText = state.stress + '%';
            
            document.getElementById('stress-fill').style.width = state.stress + '%';
            document.getElementById('equity-fill').style.width = state.equity + '%';
        }

        function formatMoney(num) {
            if (num >= 1000000000) return '$' + (num / 1000000000).toFixed(1) + 'B';
            if (num >= 1000000) return '$' + (num / 1000000).toFixed(1) + 'M';
            if (num >= 1000) return '$' + (num / 1000).toFixed(0) + 'k';
            return '$' + num.toLocaleString();
        }

    </script>
</body>
</html>
